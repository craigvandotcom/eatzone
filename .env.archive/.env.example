# ===================================================================
# Environment Variables Template
# ===================================================================
# Copy this file to .env.local for local development
# Set these variables in Vercel for production deployment
# ===================================================================

# ===================================================================
# CRITICAL - REQUIRED FOR APP TO FUNCTION
# ===================================================================

# OpenRouter API Key (AI ingredient analysis and zoning)
# Get your key from: https://openrouter.ai/keys
OPENROUTER_API_KEY=""

# Supabase Configuration (Database and Authentication)
# Get these from: https://supabase.com/dashboard/project/_/settings/api
NEXT_PUBLIC_SUPABASE_URL=""
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=""

# ===================================================================
# PRODUCTION SECURITY - HIGHLY RECOMMENDED
# ===================================================================

# Upstash Redis for API Rate Limiting
# Without these, rate limiting is DISABLED (security risk in production)
# Get these from: https://upstash.com/
KV_REST_API_URL=""
KV_REST_API_TOKEN=""

# ===================================================================
# FEATURE CONTROLS
# ===================================================================

# Disable user signups (recommended for private beta/testing)
# Set to "true" to allow signups, "false" to disable
NEXT_PUBLIC_SIGNUP_ENABLED="false"

# ===================================================================
# AI MODEL CONFIGURATION (Optional - uses sensible defaults)
# ===================================================================

# Image Analysis Model (Vision AI - extracts ingredients from photos)
IMAGE_ANALYSIS_MODEL="openai/gpt-4o"
IMAGE_ANALYSIS_MAX_TOKENS="600"
IMAGE_ANALYSIS_TEMPERATURE="0.1"

# Ingredient Zoning Model (Text AI - classifies ingredients into zones)
ZONING_MODEL="anthropic/claude-3.7-sonnet"
ZONING_MAX_TOKENS="4096"
ZONING_TEMPERATURE="0.1"

# ===================================================================
# RATE LIMITING (Optional - uses defaults if not set)
# ===================================================================

# Image analysis rate limit (requests per minute) - Vision AI is expensive/slow
IMAGE_ANALYSIS_RATE_LIMIT="10"

# Ingredient zoning rate limit (requests per minute) - Text AI is cheaper/faster
ZONING_RATE_LIMIT="50"

# ===================================================================
# IMAGE PROCESSING LIMITS (Optional - uses defaults if not set)
# ===================================================================

MAX_IMAGE_FILE_SIZE="10485760"  # 10MB in bytes
MAX_IMAGES_PER_REQUEST="5"      # Maximum images per API request
MAX_CAMERA_IMAGES="3"           # Maximum images in camera capture UI

# ===================================================================
# BACKGROUND PROCESSING (Optional - uses defaults if not set)
# ===================================================================

BACKGROUND_BATCH_SIZE="10"            # Number of items to process per batch
BACKGROUND_RETRY_DELAY_MS="5000"      # Base delay between retries (5 seconds)
BACKGROUND_PROCESS_INTERVAL_MS="60000" # Interval between background runs (1 minute)
MAX_RETRY_ATTEMPTS="3"                # Maximum retry attempts for failed operations

# ===================================================================
# DATABASE OPERATIONS (Optional - uses defaults if not set)
# ===================================================================

# Migration script settings (only used during data migrations)
MIGRATION_BATCH_SIZE="100"      # Records to migrate per batch
MIGRATION_DELAY_MS="500"        # Delay between migration batches

# Supabase Service Role Key (only needed for migration scripts)
# NOT required for normal app operation
SUPABASE_SECRET_KEY=""

# ===================================================================
# TESTING ONLY - DO NOT SET IN PRODUCTION
# ===================================================================

# Playwright E2E Test Credentials
# Set these to run E2E tests locally with a real test account
TEST_USER_EMAIL=""
TEST_USER_PASSWORD=""

# Jest Unit/Component Test Mock Data
# Set these to override default test email addresses
TEST_MOCK_EMAIL=""
TEST_INVALID_EMAIL=""

# ===================================================================
# NOTES
# ===================================================================
# 
# NODE_ENV - DO NOT SET MANUALLY
# This is automatically set by Next.js and Vercel:
# - "development" for local dev (pnpm dev)
# - "production" for production builds (pnpm build)
#
# Variables starting with NEXT_PUBLIC_ are exposed to the browser
# All other variables are server-side only
#
# For production deployment:
# 1. Set variables in Vercel dashboard (Settings > Environment Variables)
# 2. Ensure rate limiting is enabled (KV_REST_API_URL and KV_REST_API_TOKEN)
# 3. Use production Supabase project credentials
# 4. Do NOT set TEST_* variables in production
# ===================================================================
